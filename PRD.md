# AI辅助中文长篇小说英译工作流程

1. 原稿录入：用户上传docx或文本文件，系统解析后按项目、章节结构存储至数据库。
2. 原稿分析：通过Analysis Agent提取每章核心信息（内容概要、人物/术语列表及变体），仅提取不翻译、不决策。
3. 知识库管理：人工对提取的关键词进行确认、去重、合并，为每个中文关键词填写英文译法，同一角色/术语的不同称呼单独录入对应译法。这一步必须在翻译前完成。
4. AI章节翻译（核心）：
   - 输入准备：将章节原文中的关键词替换为知识库英文译法，补充前3章概要及完整术语表，配合提示词构造混合输入文本；
   - 翻译执行：翻译Agent基于混合文本输出完整英文译文；
   - 计数校验：对比原文关键词与译文对应译法的出现次数，术语需严格一致，人物名允许代词替换。
5. AI章节优化（可选）：用户主动触发后，优化Agent基于原翻译结果、术语表及上下文，进行语气统一、润色等操作，优化后需再次校验一致性。
6. 系统级一致性校验：
   - 规则层：人物名、术语计数，比对关键词与译法出现次数；
   - 模型层：通过大语言模型识别译文中实体，与术语表模糊匹配，检测新译法、翻译漂移等问题；
7. 人工修订：编辑在界面查看AI译文、校验结果、高亮不一致点及修复建议，结合知识库对照进行最终修订。

流程核心优势：以局部可读替换保障翻译质量与语义完整，通过校验+人工兜底确保一致性，适用于工业级长篇小说英译。

原稿录入、知识库管理、人工修订 这几个步骤假定已经在其他系统完成，不在本系统考虑。

数据模型设计：
 - 项目：小说项目相关字段
 - 章节：小说章节相关字段，包含章节内容概要、出场人物、术语列表
 - 知识库：汇总管理人物/术语列表和对应的英文译法
 - 翻译结果：包含AI翻译、AI优化、人工修订、校验结果

